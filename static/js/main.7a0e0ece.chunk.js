(this["webpackJsonpqkart-frontend-v2-hooks"]=this["webpackJsonpqkart-frontend-v2-hooks"]||[]).push([[0],{105:function(e){e.exports=JSON.parse("{}")},124:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},153:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(34),s=a.n(c),i=(a(124),a(18)),o=a(14),l=a(24),d=a(9),u=a(225),j=a(219),h=a(229),b=a(224),p=a(206),O=a(26),x=a.n(O),m=a(21),f=a(36),v=a(38),g=(a(145),a(1)),w=function(){return Object(g.jsxs)(p.a,{className:"footer",children:[Object(g.jsx)(p.a,{children:Object(g.jsx)("img",{src:"logo_dark.svg",alt:"QKart-icon"})}),Object(g.jsx)("p",{className:"footer-text",children:"QKart is your one stop solution to the buy the latest trending items with India's Fastest Delivery to your doorstep"})]})},y=a(110),k=a.n(y),C=a(226),N=a(207),S=(a(146),function(e){var t=e.children,a=e.hasHiddenAuthButtons,n=Object(m.f)(),r=localStorage.getItem("username");return Object(g.jsxs)(N.a,{className:"header",children:[Object(g.jsx)(N.a,{className:"header-title",children:Object(g.jsx)("img",{src:"logo_light.svg",alt:"QKart-icon"})}),t,a?Object(g.jsx)(b.a,{className:"explore-button",startIcon:Object(g.jsx)(k.a,{}),variant:"text",onClick:function(){n.push("/")},children:"Back to explore"}):Object(g.jsx)(u.a,{direction:"row",alignItems:"center",children:r?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(C.a,{alt:r,src:"avatar.png",style:{marginRight:"7px"}}),Object(g.jsx)("span",{className:"username-text",children:r}),Object(g.jsx)(b.a,{className:"explore-button",variant:"text",onClick:function(){localStorage.clear(),n.push("/")},children:"LOGOUT"})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(b.a,{variant:"text",className:"explore-button",style:{marginRight:"10px"},onClick:function(){n.push("/login")},children:"LOGIN"}),Object(g.jsx)(b.a,{variant:"contained",className:"register-button",onClick:function(){n.push("/register")},children:"REGISTER"})]})})]})}),A=(a(153),function(){var e=Object(m.f)(),t=Object(v.b)().enqueueSnackbar,a=Object(n.useState)({username:"",password:"",confirmPassword:""}),r=Object(d.a)(a,2),c=r[0],s=r[1],O=Object(n.useState)(!1),y=Object(d.a)(O,2),k=y[0],C=y[1],N=function(){var a=Object(l.a)(Object(o.a)().mark((function a(n){return Object(o.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!A(n)){a.next=13;break}return a.prev=1,C(!0),a.next=5,x.a.post(se.endpoint+"/auth/register",{username:n.username,password:n.password});case 5:201===a.sent.status&&(t("Registered successful!",{variant:"success"}),C(!1),e.push("/login")),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),C(!1),a.t0.response&&a.t0.response.data&&a.t0.response.status>=400&&a.t0.response.status<500?t(a.t0.response.data.message,{variant:"error"}):t("Something went wrong. Check that the backend is running, reachable and returns valid JSON",{variant:"error"});case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}(),A=function(e){return""===e.username?(t("Username is a required field",{variant:"warning"}),!1):e.username.length<6?(t("Username must be alteast 6 characters",{variant:"warning"}),!1):""===e.password?(t("Password is a required field",{variant:"warning"}),!1):e.password.length<6?(t("Password must be alteast 6 characters",{variant:"warning"}),!1):e.password===e.confirmPassword||(t("Password and Confirm Password do not match.",{variant:"warning"}),!1)};return Object(g.jsxs)(p.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"100vh",children:[Object(g.jsx)(S,{hasHiddenAuthButtons:!0}),Object(g.jsx)(p.a,{className:"content",children:Object(g.jsxs)(u.a,{spacing:2,className:"form",children:[Object(g.jsx)("h2",{className:"title",children:"Register"}),Object(g.jsx)(j.a,{id:"username",label:"Username",variant:"outlined",title:"Username",name:"username",placeholder:"Enter Username",fullWidth:!0,value:c.username,onChange:function(e){return s(Object(i.a)(Object(i.a)({},c),{},{username:e.target.value}))}}),Object(g.jsx)(j.a,{id:"password",variant:"outlined",label:"Password",name:"password",type:"password",helperText:"Password must be atleast 6 characters length",fullWidth:!0,placeholder:"Enter a password with minimum 6 characters",value:c.password,onChange:function(e){return s(Object(i.a)(Object(i.a)({},c),{},{password:e.target.value}))}}),Object(g.jsx)(j.a,{id:"confirmPassword",variant:"outlined",label:"Confirm Password",name:"confirmPassword",type:"password",fullWidth:!0,value:c.confirmPassword,onChange:function(e){return s(Object(i.a)(Object(i.a)({},c),{},{confirmPassword:e.target.value}))}}),k?Object(g.jsx)(p.a,{style:{justifyContent:"center",display:"flex"},children:Object(g.jsx)(h.a,{})}):Object(g.jsx)(b.a,{className:"button",variant:"contained",onClick:function(){return N(c)},children:"Register Now"}),Object(g.jsxs)("p",{className:"secondary-action",children:["Already have an account? \xa0",Object(g.jsx)(f.b,{to:"/login",className:"linkText",children:"Login here"})]})]})}),Object(g.jsx)(w,{})]})}),I=(a(105),a(155),function(){var e=Object(m.f)(),t=Object(v.b)().enqueueSnackbar,a=Object(n.useState)({username:"",password:""}),r=Object(d.a)(a,2),c=r[0],s=r[1],O=Object(n.useState)(!1),y=Object(d.a)(O,2),k=y[0],C=y[1],N=function(){var a=Object(l.a)(Object(o.a)().mark((function a(n){var r,c;return Object(o.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!A(n)){a.next=13;break}return a.prev=1,C(!0),a.next=5,x.a.post(se.endpoint+"/auth/login",{username:n.username,password:n.password});case 5:201===(r=a.sent).status&&(t("Logged in successfully",{variant:"success"}),I(r.data.token,r.data.username,r.data.balance),C(!1),e.push("/")),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),C(!1),null!==a.t0&&void 0!==a.t0&&null!==(c=a.t0.response)&&void 0!==c&&c.data&&a.t0.response.status>=400&&a.t0.response.status<500?t(a.t0.response.data.message,{variant:"error"}):t("Something went wrong. Check that the backend is running, reachable and returns valid JSON",{variant:"error"});case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}(),A=function(e){var a=e.username,n=void 0===a?"":a,r=e.password,c=void 0===r?"":r;return""===n?(t("Username is a required field",{variant:"warning"}),!1):""!==c||(t("Password is a required field",{variant:"warning"}),!1)},I=function(e,t,a){localStorage.setItem("token",e),localStorage.setItem("username",t),localStorage.setItem("balance",a)};return Object(g.jsxs)(p.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"100vh",children:[Object(g.jsx)(S,{hasHiddenAuthButtons:!0}),Object(g.jsx)(p.a,{className:"content",children:Object(g.jsxs)(u.a,{spacing:2,className:"form",children:[Object(g.jsx)("h2",{className:"title",children:"Login"}),Object(g.jsx)(j.a,{id:"username",label:"Username",variant:"outlined",title:"Username",name:"username",placeholder:"Username",fullWidth:!0,value:c.username,onChange:function(e){return s(Object(i.a)(Object(i.a)({},c),{},{username:e.target.value}))}}),Object(g.jsx)(j.a,{id:"password",variant:"outlined",label:"Password",name:"password",type:"password",fullWidth:!0,placeholder:"Password",value:c.password,onChange:function(e){return s(Object(i.a)(Object(i.a)({},c),{},{password:e.target.value}))}}),k?Object(g.jsx)(p.a,{style:{justifyContent:"center",display:"flex"},children:Object(g.jsx)(h.a,{})}):Object(g.jsx)(b.a,{className:"button",variant:"contained",onClick:function(){return N(c)},children:"Login To QKart"}),Object(g.jsxs)("p",{className:"secondary-action",children:["Don't have an account? \xa0",Object(g.jsx)(f.b,{to:"/register",className:"linkText",children:"Register now"})]})]})}),Object(g.jsx)(w,{})]})}),P=a(215),E=a(216),q=a(237),D=a(228),z=a(210),B=a(230),R=a(231),T=a(232),J=a(233),W=a(221),F=a(234),L=(a(156),function(e){var t=e.product,a=e.handleAddToCart;return Object(g.jsxs)(B.a,{className:"card",children:[Object(g.jsx)(R.a,{component:"img",image:t.image,alt:t._id}),Object(g.jsxs)(T.a,{children:[Object(g.jsx)(J.a,{gutterBottom:!0,variant:"h6",children:t.name}),Object(g.jsxs)(J.a,{gutterBottom:!0,fontWeight:"bold",children:["$",t.cost]}),Object(g.jsx)(W.a,{value:t.rating,readOnly:!0})]}),Object(g.jsx)(F.a,{className:"card-actions",children:Object(g.jsx)(b.a,{variant:"contained",startIcon:Object(g.jsx)(z.a,{}),className:"card-button",fullWidth:!0,onClick:a,children:"Add to cart"})})]})}),U=a(211),_=a(212),$=a(213),Q=a(214),H=a(235),Y=a(236),K=(a(157),function(e,t){var a=[];if(e.length&&t.length)for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)e[n].productId===t[r]._id&&a.push(Object(i.a)(Object(i.a)({},t[r]),e[n]));return a}),G=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){return e+t.cost*t.qty}),0)},M=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){var t=0;return e.productId&&t++,t})).reduce((function(e,t){return e+t}),0)},V=function(e){var t=e.value,a=e.handleAdd,n=e.handleDelete;e.isReadOnly;return Object(g.jsxs)(u.a,{direction:"row",alignItems:"center",children:[Object(g.jsx)(H.a,{size:"medium",color:"success",onClick:n,children:Object(g.jsx)(U.a,{})}),Object(g.jsx)(p.a,{padding:"0.5rem","data-testid":"item-qty",children:t}),Object(g.jsx)(H.a,{size:"medium",color:"success",onClick:a,children:Object(g.jsx)(_.a,{})})]})},X=function(e){var t=e.items,a=void 0===t?[]:t;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(p.a,{className:"cart",children:Object(g.jsxs)(p.a,{display:"flex",flexDirection:"column",padding:"1rem",children:[Object(g.jsx)("h2",{children:"Order Details"}),Object(g.jsxs)(p.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[Object(g.jsxs)(p.a,{children:[Object(g.jsx)("p",{children:"Products"}),Object(g.jsx)("p",{children:"Subtotal"}),Object(g.jsx)("p",{children:"Shipping Charges"}),Object(g.jsx)("h3",{children:"Total"})]}),Object(g.jsxs)(p.a,{style:{textAlign:"right"},children:[Object(g.jsx)("p",{children:M(a)}),Object(g.jsxs)("p",{children:["$",G(a)]}),Object(g.jsx)("p",{children:"$0"}),Object(g.jsxs)("h3",{children:["$",G(a)]})]})]})]})})})},Z=function(e){e.products;var t=e.items,a=void 0===t?[]:t,n=e.handleQuantity,r=e.isReadOnly,c=void 0!==r&&r,s=Object(m.f)();return a.length?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(p.a,{className:"cart",children:[a.map((function(e){return Object(g.jsxs)(p.a,{display:"flex",alignItems:"flex-start",padding:"1rem",children:[Object(g.jsx)(p.a,{className:"image-container",children:Object(g.jsx)("img",{src:e.image,alt:e.name,width:"100%",height:"100%"})}),Object(g.jsxs)(p.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"6rem",paddingX:"1rem",children:[Object(g.jsx)("div",{children:e.name}),Object(g.jsxs)(p.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[c?Object(g.jsxs)(p.a,{style:{fontSize:"1rem"},children:["Qty: ",e.qty]}):Object(g.jsx)(V,{value:e.qty,handleAdd:function(){return n(e.productId,e.qty+1)},handleDelete:function(){return n(e.productId,e.qty-1)}}),Object(g.jsxs)(p.a,{padding:"0.5rem",fontWeight:"700",children:["$",e.cost]})]})]})]},e.productId)})),Object(g.jsx)(Y.a,{}),Object(g.jsxs)(p.a,{padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(g.jsx)(p.a,{color:"#3C3C3C",alignSelf:"center",children:"Order total"}),Object(g.jsxs)(p.a,{color:"#3C3C3C",fontWeight:"700",fontSize:"1.5rem",alignSelf:"center","data-testid":"cart-total",children:["$",G(a)]})]}),c?null:Object(g.jsx)(p.a,{display:"flex",justifyContent:"flex-end",className:"cart-footer",children:Object(g.jsx)(b.a,{color:"success",variant:"contained",startIcon:Object(g.jsx)(Q.a,{}),className:"checkout-btn",onClick:function(){s.push("/checkout")},children:"Checkout"})})]}),c?Object(g.jsx)(X,{items:a}):null]}):Object(g.jsxs)(p.a,{className:"cart empty",children:[Object(g.jsx)($.a,{className:"empty-cart-icon"}),Object(g.jsx)(p.a,{color:"#aaa",textAlign:"center",children:"Cart is empty. Add more items to the cart to checkout."})]})},ee=(a(158),function(){var e=Object(v.b)().enqueueSnackbar,t=localStorage.getItem("token"),a=localStorage.getItem("username"),r=Object(n.useState)([]),c=Object(d.a)(r,2),s=c[0],i=c[1],u=Object(n.useState)([]),b=Object(d.a)(u,2),O=b[0],m=b[1],f=Object(n.useState)([]),y=Object(d.a)(f,2),k=y[0],C=y[1],N=Object(n.useState)(!1),A=Object(d.a)(N,2),I=A[0],z=A[1],B=Object(n.useState)(null),R=Object(d.a)(B,2),T=R[0],J=R[1],W=Object(n.useState)(!1),F=Object(d.a)(W,2),U=F[0],_=F[1];Object(n.useEffect)((function(){$()}),[]),Object(n.useEffect)((function(){Y(t)}),[I]);var $=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var a;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _(!0),t.prev=1,t.next=4,x.a.get("".concat(se.endpoint,"/products"));case 4:a=t.sent,i(a.data),m(a.data),z(!0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),t.t0.response&&400===t.t0.response.status&&e(t.t0.response.data.message,{variant:"error"});case 13:_(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}(),Q=function(){var t=Object(l.a)(Object(o.a)().mark((function t(a){var n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _(!0),t.prev=1,t.next=4,x.a.get("".concat(se.endpoint,"/products/search?value=").concat(a));case 4:n=t.sent,m(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0.response?(404===t.t0.response.status&&m([]),500===t.t0.response.status&&(e(t.t0.response.data.message,{variant:"error"}),m(s))):e("Something went wrong. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 11:_(!1);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),H=function(e,t){var a=e.target.value;t&&clearTimeout(t);var n=setTimeout((function(){Q(a)}),500);J(n)},Y=function(){var t=Object(l.a)(Object(o.a)().mark((function t(a){var n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,x.a.get("".concat(se.endpoint,"/cart"),{headers:{Authorization:"Bearer ".concat(a)}});case 5:200===(n=t.sent).status&&C(K(n.data,s)),t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(2),t.t0.response&&400===t.t0.response.status?e(t.t0.response.data.message,{variant:"error"}):e("Could not fetch cart details. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"}),t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),G=function(e,t){var a=!1;return e.forEach((function(e){e.productId===t&&(a=!0)})),a},M=function(){var t=Object(l.a)(Object(o.a)().mark((function t(a,n,r,c,s){var i=arguments;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.length>5&&void 0!==i[5]?i[5]:{preventDuplicate:!1},a?G(n,c)?e("Item already in cart. Use the cart sidebar to update quantity or remove item.",{variant:"warning"}):V(c,s):e("Login to add an item to the Cart",{variant:"warning"});case 2:case"end":return t.stop()}}),t)})));return function(e,a,n,r,c){return t.apply(this,arguments)}}(),V=function(){var a=Object(l.a)(Object(o.a)().mark((function a(n,r){var c;return Object(o.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x.a.post("".concat(se.endpoint,"/cart"),{productId:n,qty:r},{headers:{Authorization:"Bearer ".concat(t)}});case 3:c=a.sent,C(K(c.data,s)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),a.t0.response&&400===a.t0.response.status?e(a.t0.response.data.message,{variant:"error"}):e("Could not add to cart. Something went wrong.",{variant:"error"});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)(S,{children:Object(g.jsx)(p.a,{width:350,children:Object(g.jsx)(j.a,{className:"search-desktop",size:"small",fullWidth:!0,InputProps:{endAdornment:Object(g.jsx)(q.a,{position:"end",children:Object(g.jsx)(P.a,{color:"success"})})},placeholder:"Search for items/categories",name:"search",onChange:function(e){return H(e,T)}})})}),Object(g.jsx)(j.a,{className:"search-mobile",size:"small",fullWidth:!0,InputProps:{endAdornment:Object(g.jsx)(q.a,{position:"end",children:Object(g.jsx)(P.a,{color:"success"})})},placeholder:"Search for items/categories",name:"search",onChange:function(e){return H(e,T)}}),Object(g.jsxs)(D.a,{container:!0,children:[Object(g.jsxs)(D.a,{item:!0,container:!0,direction:"row",justifyContent:"center",alignItems:"center",xs:!0,md:!0,children:[Object(g.jsx)(D.a,{item:!0,className:"product-grid",children:Object(g.jsx)(p.a,{className:"hero",children:Object(g.jsxs)("p",{className:"hero-heading",children:["India\u2019s ",Object(g.jsx)("span",{className:"hero-highlight",children:"FASTEST DELIVERY"})," ","to your door step"]})})}),U?Object(g.jsxs)(p.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",py:10,children:[Object(g.jsx)(h.a,{size:40}),Object(g.jsx)("h4",{children:"Loading Products..."})]}):Object(g.jsx)(D.a,{container:!0,item:!0,spacing:1,my:3,mx:2,justifyContent:"center",direction:"row",children:O.length?O.map((function(e){return Object(g.jsx)(D.a,{item:!0,xs:6,md:3,children:Object(g.jsx)(L,{product:e,handleAddToCart:function(a){return n=e._id,void M(t,k,s,n,1);var n}})},e._id)})):Object(g.jsxs)(p.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",py:10,children:[Object(g.jsx)(E.a,{}),Object(g.jsx)("h4",{children:"No products found"})]})})]}),a&&Object(g.jsx)(D.a,{container:!0,item:!0,xs:12,md:3,style:{backgroundColor:"#E9F5E1",height:"100vh"},justifyContent:"center ",alignItems:"stretch",children:Object(g.jsx)(Z,{items:k,products:s,handleQuantity:function(e,t){V(e,t)}})})]}),Object(g.jsx)(w,{})]})}),te=a(217),ae=a(218),ne=(a(159),function(e){var t=e.token,a=e.newAddress,n=e.handleNewAddress,r=e.addAddress;return Object(g.jsxs)(p.a,{display:"flex",flexDirection:"column",children:[Object(g.jsx)(j.a,{multiline:!0,minRows:4,placeholder:"Enter your complete address",onChange:function(e){n(Object(i.a)(Object(i.a)({},a),{},{value:e.target.value}))}}),Object(g.jsxs)(u.a,{direction:"row",my:"1rem",children:[Object(g.jsx)(b.a,{color:"success",variant:"contained",onClick:Object(l.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t,a);case 2:case"end":return e.stop()}}),e)}))),children:"Add"}),Object(g.jsx)(b.a,{color:"success",variant:"text",onClick:function(){n({isAddingNewAddress:!1,value:""})},children:"Cancel"})]})]})}),re=function(){var e=localStorage.getItem("token"),t=Object(m.f)(),a=Object(v.b)().enqueueSnackbar,r=Object(n.useState)([]),c=Object(d.a)(r,2),s=c[0],u=c[1],j=Object(n.useState)([]),h=Object(d.a)(j,2),O=h[0],f=h[1],y=Object(n.useState)({all:[],selected:""}),k=Object(d.a)(y,2),C=k[0],N=k[1],A=Object(n.useState)({isAddingNewAddress:!1,value:""}),I=Object(d.a)(A,2),P=I[0],E=I[1],q=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(se.endpoint,"/products"));case 3:return t=e.sent,f(t.data),e.abrupt("return",t.data);case 8:if(e.prev=8,e.t0=e.catch(0),!e.t0.response||500!==e.t0.response.status){e.next=15;break}return a(e.t0.response.data.message,{variant:"error"}),e.abrupt("return",null);case 15:a("Could not fetch products. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,x.a.get("".concat(se.endpoint,"/cart"),{headers:{Authorization:"Bearer ".concat(t)}});case 5:return n=e.sent,e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(2),a("Could not fetch cart details. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"}),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(Object(o.a)().mark((function e(n){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||t.push("/"),e.prev=1,e.next=4,x.a.get("".concat(se.endpoint,"/user/addresses"),{headers:{Authorization:"Bearer ".concat(n)}});case 4:r=e.sent,N(Object(i.a)(Object(i.a)({},C),{},{all:r.data})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n?a("Could not fetch addresses. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"}):a("You must be logged in to access checkout page",{variant:"info"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t,n){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("".concat(se.endpoint,"/user/addresses"),{address:n.value},{headers:{Authorization:"Bearer ".concat(t)}});case 3:r=e.sent,N(Object(i.a)(Object(i.a)({},C),{},{all:r.data})),E((function(e){return Object(i.a)(Object(i.a)({},e),{},{isAddingNewAddress:!1,value:""})})),a("New Address added Successfully",{variant:"success"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?a(e.t0.response.data.message,{variant:"error"}):a("Could not add this address. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t,n){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.delete("".concat(se.endpoint,"/user/addresses/").concat(n),{headers:{Authorization:"Bearer ".concat(t)}});case 3:r=e.sent,N(Object(i.a)(Object(i.a)({},C),{},{all:r.data})),a("Deleted",{variant:"success"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response?a(e.t0.response.data.message,{variant:"error"}):a("Could not delete this address. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),W=function(e,t){return G(e)>localStorage.getItem("balance")?(a("You do not have enough balance in your wallet for this purchase",{variant:"warning"}),!1):0===t.all.length?(a("Please add a new address before proceeding.",{variant:"warning"}),!1):!(!t.selected&&t.all.length>0)||(a("Please select one shipping address to proceed.",{variant:"warning"}),!1)},F=function(){var e=Object(l.a)(Object(o.a)().mark((function e(n,r,c){var s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W(r,c)){e.next=19;break}return e.prev=2,e.next=5,x.a.post("".concat(se.endpoint,"/cart/checkout"),{addressId:c.selected},{headers:{Authorization:"Bearer ".concat(n)}});case 5:if(!e.sent.data.success){e.next=12;break}return s=localStorage.getItem("balance")-G(r),localStorage.setItem("balance",s),t.push("/thanks"),a("Order placed successfully",{variant:"success"}),e.abrupt("return",!0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),e.t0.response?a(e.t0.response.data.message,{variant:"error"}):a("Could not place order. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 17:e.next=20;break;case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,a,n){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t=function(){var t=Object(l.a)(Object(o.a)().mark((function t(){var a,n,r;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q();case 2:return a=t.sent,t.next=5,z(e);case 5:if(n=t.sent,!a||!n){t.next=11;break}return t.next=9,K(n,a);case 9:r=t.sent,u(r);case 11:return t.next=13,B(e);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(S,{}),Object(g.jsxs)(D.a,{container:!0,children:[Object(g.jsx)(D.a,{item:!0,xs:12,md:9,children:Object(g.jsxs)(p.a,{className:"shipping-container",minHeight:"100vh",children:[Object(g.jsx)(J.a,{color:"#3C3C3C",variant:"h4",my:"1rem",children:"Shipping"}),Object(g.jsx)(J.a,{color:"#3C3C3C",my:"1rem",children:"Manage all the shipping addresses you want. This way you won't have to enter the shipping address manually with every order. Select the address you want to get your order delivered."}),Object(g.jsx)(Y.a,{}),0===C.all.length&&Object(g.jsx)(J.a,{my:"1rem",children:"No addresses found for this account. Please add one to proceed"}),C.all.length>0&&C.all.map((function(t){return Object(g.jsxs)(p.a,{className:C.selected===t._id?"address-item selected":"address-item not-selected",display:"flex",justifyContent:"space-between",alignItems:"center",mt:3,children:[Object(g.jsx)(p.a,{ml:1,width:"100%",children:Object(g.jsx)(b.a,{type:"text",role:"text",variant:"text",sx:{color:"black"},onClick:function(){N(Object(i.a)(Object(i.a)({},C),{},{selected:t._id}))},children:t.address})}),Object(g.jsx)(p.a,{mr:1,children:Object(g.jsxs)(b.a,{color:"success",onClick:function(){T(e,t._id)},children:[Object(g.jsx)(te.a,{})," Delete"]})})]},t._id)})),!P.isAddingNewAddress&&Object(g.jsx)(b.a,{color:"success",variant:"contained",id:"add-new-btn",size:"large",onClick:function(){E(Object(i.a)(Object(i.a)({},P),{},{isAddingNewAddress:!0}))},children:"Add new address"}),P.isAddingNewAddress&&Object(g.jsx)(ne,{token:e,newAddress:P,handleNewAddress:E,addAddress:R}),Object(g.jsx)(J.a,{color:"#3C3C3C",variant:"h4",my:"1rem",children:"Payment"}),Object(g.jsx)(J.a,{color:"#3C3C3C",my:"1rem",children:"Payment Method"}),Object(g.jsx)(Y.a,{}),Object(g.jsxs)(p.a,{my:"1rem",children:[Object(g.jsx)(J.a,{children:"Wallet"}),Object(g.jsxs)(J.a,{children:["Pay $",G(s)," of available $",localStorage.getItem("balance")]})]}),Object(g.jsx)(b.a,{startIcon:Object(g.jsx)(ae.a,{}),variant:"contained",color:"success",onClick:function(){return F(e,s,C)},children:"PLACE ORDER"})]})}),Object(g.jsx)(D.a,{item:!0,xs:12,md:3,bgcolor:"#E9F5E1",children:Object(g.jsx)(Z,{isReadOnly:!0,products:O,items:s})})]}),Object(g.jsx)(w,{})]})},ce=(a(160),function(){var e=Object(m.f)();return Object(n.useEffect)((function(){localStorage.getItem("token")||e.push("/")}),[e]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(S,{}),Object(g.jsxs)(p.a,{className:"greeting-container",children:[Object(g.jsx)("h2",{children:"Yay! It's ordered \ud83d\ude03"}),Object(g.jsx)("p",{children:"You will receive an invoice for your order shortly."}),Object(g.jsx)("p",{children:"Your order will arrive in 7 business days."}),Object(g.jsx)("p",{id:"balance-overline",children:"Wallet Balance"}),Object(g.jsxs)("p",{id:"balance",children:["$",localStorage.getItem("balance")," Available"]}),Object(g.jsx)(b.a,{variant:"contained",size:"large",color:"success",id:"continue-btn",onClick:function(){e.push("/")},children:"Continue Shopping"})]}),Object(g.jsx)(w,{})]})}),se={endpoint:"https://qkart-frontend-6zoc.onrender.com/api/v1"};var ie=function(){return Object(g.jsx)(f.a,{children:Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(m.c,{children:[Object(g.jsx)(m.a,{exact:!0,path:"/",component:ee}),Object(g.jsx)(m.a,{path:"/register",component:A}),Object(g.jsx)(m.a,{path:"/login",component:I}),Object(g.jsx)(m.a,{path:"/checkout",component:re}),Object(g.jsx)(m.a,{path:"/thanks",component:ce})]})})})},oe=a(86);Object(oe.a)({typography:{fontFamily:"Lato"},palette:{primary:{light:"#45c09f",main:"#00a278",dark:"#00845c",contrastText:"#fff"}}});s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(v.a,{maxSnack:1,anchorOrigin:{vertical:"bottom",horizontal:"center"},preventDuplicate:!0,children:Object(g.jsx)(ie,{})})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.7a0e0ece.chunk.js.map